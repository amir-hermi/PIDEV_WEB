{% extends 'baseAdmin.html.twig' %}

{% block title %}Hello AdministrateurController!{% endblock %}
{% block activeCLi %} active {% endblock %}
{% block css %}
    <link href="{{ asset('adminStyle/vendor/fontawesome-free/css/all.min.css') }}" rel="stylesheet" type="text/css">
    <link
            href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
            rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="{{ asset('adminStyle/css/sb-admin-2.min.css') }}" rel="stylesheet">

    <!-- Custom styles for this page -->
    <link href="{{ asset('adminStyle/vendor/datatables/dataTables.bootstrap4.min.css') }}" rel="stylesheet">
{% endblock %}
{% block content %}

    <div class="container-fluid">
        <form method="post"
              class="d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
            <div class="input-group">
                <input type="text" name="recherche" class="form-control bg-light border-0 small" placeholder="Search for..."
                       aria-label="Search" aria-describedby="basic-addon2">
                <div class="input-group-append">
                    <button class="btn btn-primary" type="submit">
                        <i class="fas fa-search fa-sm"></i>
                    </button>
                </div>
            </div>
        </form>
        <!-- Page Heading -->
        <h1 class="h3 mb-2 text-gray-800">Liste des clients</h1>

        <!-- DataTales Example -->
        <div class="card shadow mb-4">



            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                        <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Prenom</th>
                            <th>email</th>
                            <th>Telephone</th>
                            <th>Type</th>

                            <th>Etat</th>
                            <th>Image</th>
                            <th>Status</th>

                            <th>Action</th>
                        </tr>
                        </thead>
                        <tfoot>

                        </tfoot>
                        <tbody>
                        {% for i in data %}
                        <tr>
                            <td>{{ i.lastname }}</td>
                            <td>{{ i.username }}</td>
                            <td>{{ i.email }}</td>
                            <td>{{ i.tel }}</td>

                            <td>{% for a in i.getRoles() %}
                                    {% if a == "ROLE_USER" %}
                                    Client
                                    {% elseif a == "ROLE_ADMIN"%}
                                        ADMINISTRATEUR
                                    {% endif %}

                                    <br>{% endfor %}</td>
                            <td>{{ i.etat }}</td>
                            <td><img  style="width: 70px; height: 50px" class="img-profile rounded-circle"
                                      src="{{ asset('images/'~asset(i.image ) ) }}"/></td>
                            <td>
                                {% if i.getActivetoken() == null %}
                                    <span class="badge bg-secondary" style="color:black">Offline</span>
                                {% elseif i.getActivetoken() != null %}
                                    <span class="badge rounded-pill bg-success" style="color:black" >En Ligne</span>
                                {% endif %}

                                <br></td>

                            <td>
                                <a href="{{ path('clientbloque',{'id' :i.id}) }}" class="btn btn-danger btn-icon-split">
                                        <span class="icon text-white-50"  STYLE="font-size:70%">
                                            <i class="fas fa-trash"></i>
                                        </span>
                                    <span class="text" STYLE="font-size:70%" >_bloquer_  </span><br>
                                </a><br>
                                <a href="{{ path('clientdebbloque',{'id' :i.id}) }}" class="btn btn-success btn-icon-split">
                                        <span class="icon text-white-50" STYLE="font-size:70%">
                                            <i class="fas fa-check"></i>
                                        </span>
                                    <span class="text" STYLE="font-size:70%" >Debloquer</span>
                                </a>
                               <!-- <a href="{{ path('updateclient',{'idP' :i.id}) }}" class="btn btn-warning btn-circle">
                                    <i class="fas fa-pen" ></i>
                                </a>
                                <a href="{{ path('deletClient',{'idP' :i.id}) }}" class="btn btn-warning btn-circle ">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </a>
                                -->
<br>

                            </td>
                        </tr>
                          {% endfor %}
                        </tbody>
                    </table>
                    <div style="right: 0">{{ knp_pagination_render(data) }}</div>
                </div>
            </div>
        </div>

    </div>

{% endblock %}
{% block js %}
    <script src="{{ asset('adminStyle/vendor/jquery/jquery.min.js') }}"></script>
    <script src="{{ asset('adminStyle/vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>

    <!-- Core plugin JavaScript-->
    <script src="{{ asset('adminStyle/vendor/jquery-easing/jquery.easing.min.js') }}"></script>

    <!-- Custom scripts for all pages-->
    <script src="{{ asset('adminStyle/js/sb-admin-2.min.js') }}"></script>

    <!-- Page level plugins -->

    <!-- Page level custom scripts -->
    <script src="{{ asset('adminStyle/js/demo/datatables-demo.js') }}"></script>
{% endblock %}
